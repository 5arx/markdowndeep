<!DOCTYPE html >
<html>
<head>
  <title>JavaScript unit test file</title>
  <link rel="stylesheet" href="/js/unittest.css" type="text/css" />
  <script src="/js/jsunittest.js" type="text/javascript"></script>

  <script src="/js/MarkdownDeep.js" type="text/javascript"></script>
  
</head>
<body>

<div id="content">

  <div id="header">
    <h1>MarkdownDeep unit test file</h1>
    <p>
      This file tests <strong>MarkdownDeep.BlockProcessor</strong>.
    </p>
  </div>

  <!-- Log output (one per Runner, via {testLog: "testlog"} option)-->
  <div id="testlog"></div>
  
  <!-- Put sample/test html here -->
  <div id="sample">
  </div>
</div>

<script type="text/javascript">
// <![CDATA[
  new Test.Unit.Runner({
    setup: function() {
		this.m=new MarkdownDeep.Markdown();
		this.p=new MarkdownDeep.BlockProcessor(this.m);
    },
    
    teardown: function() {
    },
    
    testSingleLineParagraph: function() { with(this) {
		var b = this.p.Process("paragraph");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.p, b[0].blockType);
		assert("paragraph"==b[0].get_Content());
    }},
    
    testMultiLineParagraph: function() { with(this) {
		var b = this.p.Process("l1\nl2\n\n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.p, b[0].blockType);
		assert("l1\nl2"==b[0].get_Content());
    }},
    

    testSetExtH1: function() { with(this) {
		var b = this.p.Process("heading\n===\n\n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.h1, b[0].blockType);
		assert("heading"==b[0].get_Content());
    }},
    
    testSetExtH2: function() { with(this) {
		var b = this.p.Process("heading\n---\n\n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.h2, b[0].blockType);
		assert("heading"==b[0].get_Content());
    }},
    
    testSetExtHeadingInParagraph: function() { with(this) {

		var b = this.p.Process("p1\nheading\n---\np2\n");
		assertEqual(3, b.length);

		assertEqual(MarkdownDeep.BlockType.p, b[0].blockType);
		assert("p1"==b[0].get_Content());

		assertEqual(MarkdownDeep.BlockType.h2, b[1].blockType);
		assert("heading"==b[1].get_Content());

		assertEqual(MarkdownDeep.BlockType.p, b[2].blockType);
		assert("p2"==b[2].get_Content());

    }},
    
    testAtxHeadings: function() { with(this) {

		var b = this.p.Process("#heading#\nparagraph\n");
		assertEqual(2, b.length);

		assertEqual(MarkdownDeep.BlockType.h1, b[0].blockType);
		assert("heading"==b[0].get_Content());

		assertEqual(MarkdownDeep.BlockType.p, b[1].blockType);
		assert("paragraph"==b[1].get_Content());

    }},
    
    testAtxHeadingInParagraph: function() { with(this) {

		var b = this.p.Process("p1\n## heading ##\np2\n");
		assertEqual(3, b.length);

		assertEqual(MarkdownDeep.BlockType.p, b[0].blockType);
		assert("p1"==b[0].get_Content());

		assertEqual(MarkdownDeep.BlockType.h2, b[1].blockType);
		assert("heading"==b[1].get_Content());

		assertEqual(MarkdownDeep.BlockType.p, b[2].blockType);
		assert("p2"==b[2].get_Content());

    }},
    
    testCodeBlock : function() { with(this) {

		var b = this.p.Process("\tcode1\n\t\tcode2\n\tcode3\nparagraph");
		assertEqual(2, b.length);

		assertEqual(MarkdownDeep.BlockType.codeblock, b[0].blockType);
		assert("code1\n\tcode2\ncode3\n"==b[0].get_CodeContent());

		assertEqual(MarkdownDeep.BlockType.p, b[1].blockType);
		assert("paragraph"==b[1].get_Content());

    }},
    
    testHtmlBlock : function() { with(this) {

		var b = this.p.Process("<div>\n</div>\n");
		assertEqual(1, b.length);

		assertEqual(MarkdownDeep.BlockType.html, b[0].blockType);
		assert("<div>\n</div>\n"==b[0].get_Content());
		
    }},
    
    testHtmlCommentBlock : function() { with(this) {

		var b = this.p.Process("<!-- this is a\ncomments -->\n");
		assertEqual(1, b.length);

		assertEqual(MarkdownDeep.BlockType.html, b[0].blockType);
		assert("<!-- this is a\ncomments -->\n"==b[0].get_Content());
		
    }},

    testHorizontalRules: function() { with(this) {

		var b = this.p.Process("---\n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.hr, b[0].blockType);

		b = this.p.Process("___\n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.hr, b[0].blockType);

		b = this.p.Process("***\n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.hr, b[0].blockType);

		b = this.p.Process(" - - - \n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.hr, b[0].blockType);

		b = this.p.Process("  _ _ _ \n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.hr, b[0].blockType);

		b = this.p.Process(" * * * \n");
		assertEqual(1, b.length);
		assertEqual(MarkdownDeep.BlockType.hr, b[0].blockType);

    }},
    
    
    

        
  }); 
// ]]>
</script>
</body>
</html>