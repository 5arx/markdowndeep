if(Array.prototype.indexOf==undefined)Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++)if(this[a]===b)
return a;return -1};var MarkdownDeep=new function(){function w(){this.m_SpanFormatter=new D(this);this.m_SpareBlocks=
new Array();this.m_StringBuilder=new E();this.SafeMode=false;this.ExtraMode=false;this.MarkdownInHtml=false;this.
AutoHeadingIDs=false}var a=w.prototype;a.Transform=function(b){var i=b.indexOf("\r");if(i>=0){var f=b.indexOf("\n");if(f
>=0)if(f<i)b=b.replace(/\n\r/g,"\n");else b=b.replace(/\r\n/g,"\n");b=b.replace(/\r/g,"\n")}this.m_LinkDefinitions=new 
Array();this.m_UsedHeaderIDs=new Array();var e=new x(this,this.MarkdownInHtml).Process(b),j=this.GetStringBuilder();for(
var c=0;c<e.length;c++){var k=e[c];k.Render(this,j)}return j.ToString()};a.AddLinkDefinition=function(b){this.
m_LinkDefinitions[b.id]=b};a.GetLinkDefinition=function(c){var b=this.m_LinkDefinitions[c];if(b==undefined)return null;
else return b};a.MakeUniqueHeaderID=function(j,i,f){if(!this.AutoHeadingIDs)return null;var b=this.m_SpanFormatter.
MakeID(j,i,f);if(!b)b="section";var c=b,e=1;while(this.m_UsedHeaderIDs[c]!=undefined){c=b+"-"+e.toString();e++}this.
m_UsedHeaderIDs[c]=true;return c};a.GetStringBuilder=function(){this.m_StringBuilder.Clear();return this.m_StringBuilder
};a.processSpan=function(c,f,e,b){return this.m_SpanFormatter.Format(c,f,e,b)};var h={};h.is_digit=function(b){return b
>="0"&&b<="9"};h.is_hex=function(b){return b>="0"&&b<="9"||b>="a"&&b<="f"||b>="A"&&b<="F"};h.is_alpha=function(b){
return b>="a"&&b<="z"||b>="A"&&b<="Z"};h.is_alphadigit=function(b){return b>="a"&&b<="z"||b>="A"&&b<="Z"||b>="0"&&b<="9"
};h.is_whitespace=function(b){return b==" "||b=="\t"||b=="\r"||b=="\n"};h.is_linespace=function(b){return b==" "||b==
"\t"};h.is_lineend=function(b){return b=="\r"||b=="\n"};h.is_emphasis=function(b){return b=="*"||b=="_"};h.is_escapable=
function(b){switch(b){case "\\":case "`":case "*":case "_":case "{":case "}":case "[":case "]":case "(":case ")":case 
"#":case "+":case "-":case ".":case "!":case ">":return true}return false};function O(c,b){if(c.charAt(b)!="&")return -1
;var e=b;b++;if(c.charAt(b)=="#"){b++;if(c.charAt(b)=="x"||c.charAt(b)=="X"){b++;fn_test=h.is_hex}else fn_test=h.
is_digit}else fn_test=h.is_alphadigit;if(fn_test(c.charAt(b))){b++;while(fn_test(c.charAt(b)))b++;if(c.charAt(b)==";"){
b++;return b}}b=e;return -1}function L(c){var b=c.indexOf("\\");if(b<0)return c;var f=new E(),e=0;while(b>=0){if(h.
is_escapable(c.charAt(b+1))){if(b>e)f.Append(c.substr(e,b-e));e=b+1}b=c.indexOf("\\",b+1)}if(e<c.length)f.Append(c.
substr(e,c.length-e));return f.ToString()}function N(c){var b=0,e=c.length;while(b<e&&h.is_whitespace(c.charAt(b)))b++;
while(e-1>b&&h.is_whitespace(c.charAt(b-1)))b--;return c.substr(b,e-b)}function H(c){var b=c.indexOf("@");if(b<0)
return false;var e=c.lastIndexOf(".");if(e<b)return false;return true}function K(b){b=b.toLowerCase();if(b.substr(0,7)==
"http://")return true;if(b.substr(0,8)=="https://")return true;if(b.substr(0,6)=="ftp://")return true;if(b.substr(0,7)==
"file://")return true;return false}function I(c){if(!c)return false;if(!h.is_alpha(c.charAt(0)))return false;for(var e=0
;e<c.length;e++){var b=c.charAt(e);if(h.is_alphadigit(b)||b=="_"||b=="-"||b==":"||b==".")continue;return false}
return true}function M(c,e,j){var b=j-1;while(b>=e&&h.is_whitespace(c.charAt(b)))b--;if(b<e||c.charAt(b)!="}")
return null;var k=b;b--;while(b>=e&&c.charAt(b)!="{")b--;if(b<e||c.charAt(b+1)!="#")return null;var f=b+2,i=c.substr(f,k
-f);if(!I(i))return null;while(b>e&&h.is_whitespace(c.charAt(b-1)))b--;return {id:i,end:b}}function E(){this.content=
new Array()}a=E.prototype;a.Append=function(b){if(b)this.content.push(b)};a.Clear=function(){this.content.length=0};a.
ToString=function(){return this.content.join("")};a.HtmlRandomize=function(c){var f=c.length;for(var b=0;b<f;b++){var e=
Math.random();if(e>0.90&&c.charAt(b)!="@")this.Append(c.charAt(b));else if(e>0.45){this.Append("&#");this.Append(c.
charCodeAt(b).toString());this.Append(";")}else{this.Append("&#x");this.Append(c.charCodeAt(b).toString(16));this.Append
(";")}}};a.HtmlEncode=function(e,f,j){var i=f+j,b=f;for(var c=f;c<i;c++)switch(e.charAt(c)){case "&":if(c>b)this.Append(
e.substr(b,c-b));this.Append("&amp;");b=c+1;break;case "<":if(c>b)this.Append(e.substr(b,c-b));this.Append("&lt;");b=c+1
;break;case ">":if(c>b)this.Append(e.substr(b,c-b));this.Append("&gt;");b=c+1;break;case '"':if(c>b)this.Append(e.substr
(b,c-b));this.Append("&quot;");b=c+1;break}if(c>b)this.Append(e.substr(b,c-b))};a.SmartHtmlEncodeAmpsAndAngles=function(
e,f,k){var j=f+k,c=f;for(var b=f;b<j;b++)switch(e.charAt(b)){case "&":var i=O(e,b);if(i<0){if(b>c)this.Append(e.substr(c
,b-c));this.Append("&amp;");c=b+1}else b=i-1;break;case "<":if(b>c)this.Append(e.substr(c,b-c));this.Append("&lt;");c=b+
1;break;case ">":if(b>c)this.Append(e.substr(c,b-c));this.Append("&gt;");c=b+1;break;case '"':if(b>c)this.Append(e.
substr(c,b-c));this.Append("&quot;");c=b+1;break}if(b>c)this.Append(e.substr(c,b-c))};a.SmartHtmlEncodeAmps=function(e,f
,k){var j=f+k,c=f;for(var b=f;b<j;b++)switch(e.charAt(b)){case "&":var i=O(e,b);if(i<0){if(b>c)this.Append(e.substr(c,b-
c));this.Append("&amp;");c=b+1}else b=i-1;break}if(b>c)this.Append(e.substr(c,b-c))};a.HtmlEncodeAndConvertTabsToSpaces=
function(e,i,k){var j=i+k,b=i,f=0;for(var c=i;c<j;c++){switch(e.charAt(c)){case "\t":if(c>b)this.Append(e.substr(b,c-b))
;b=c+1;this.Append(" ");f++;while(f%4!=0){this.Append(" ");f++}f--;break;case "\r":case "\n":if(c>b)this.Append(e.substr
(b,c-b));this.Append("\n");b=c+1;continue;case "&":if(c>b)this.Append(e.substr(b,c-b));this.Append("&amp;");b=c+1;break;
case "<":if(c>b)this.Append(e.substr(b,c-b));this.Append("&lt;");b=c+1;break;case ">":if(c>b)this.Append(e.substr(b,c-b)
);this.Append("&gt;");b=c+1;break;case '"':if(c>b)this.Append(e.substr(b,c-b));this.Append("&quot;");b=c+1;break}f++}if(
c>b)this.Append(e.substr(b,c-b))};function F(){this.reset.apply(this,arguments)}a=F.prototype;a.bof=function(){
return this.position==this.start};a.eof=function(){return this.position>=this.end};a.eol=function(){if(this.position>=
this.end)return true;var b=this.buf.charAt(this.position);return b=="\r"||b=="\n"||b==undefined||b==""};a.reset=function
(){this.buf=arguments.length>0?arguments[0]:null;this.start=arguments.length>1?arguments[1]:0;this.end=arguments.length>
2?this.start+arguments[2]:this.buf==null?0:this.buf.length;this.position=this.start;this.charset_offsets={}};a.current=
function(){if(this.position>=this.end)return "\x00";return this.buf.charAt(this.position)};a.remainder=function(){
return this.buf.substr(this.position)};a.SkipToEof=function(){this.position=this.end};a.SkipForward=function(b){this.
position+=b};a.SkipToEol=function(){this.position=this.buf.indexOf("\n",this.position);if(this.position<0)this.position=
this.end};a.SkipEol=function(){var b=this.position;if(this.buf.charAt(this.position)=="\r")this.position++;if(this.buf.
charAt(this.position)=="\n")this.position++;return this.position!=b};a.SkipToNextLine=function(){this.SkipToEol();this.
SkipEol()};a.CharAtOffset=function(b){if(this.position+b>=this.end)return "\x00";return this.buf.charAt(this.position+b)
};a.SkipChar=function(b){if(this.buf.charAt(this.position)==b){this.position++;return true}return false};a.SkipString=
function(b){if(this.buf.substr(this.position,b.length)==b){this.position+=b.length;return true}return false};a.
SkipWhitespace=function(){var c=this.position;while(true){var b=this.buf.charAt(this.position);if(b!=" "&&b!="\t"&&b!=
"\r"&&b!="\n")break;this.position++}return this.position!=c};a.SkipLinespace=function(){var c=this.position;while(true){
var b=this.buf.charAt(this.position);if(b!=" "&&b!="\t")break;this.position++}return this.position!=c};a.FindRE=function
(c){c.lastIndex=this.position;var b=c.exec(this.buf);if(b==null){this.position=this.end;return false}if(b.index+b[0].
length>this.end){this.position=this.end;return false}this.position=b.index;return true};a.FindOneOf=function(f){var c=-1
;for(var e in f){var b=f[e];if(b==null){b={};b.searched_from=-1;b.found_at=-1;f[e]=b}if(b.searched_from==-1||this.
position<b.searched_from||this.position>=b.found_at&&b.found_at!=-1){b.searched_from=this.position;b.found_at=this.buf.
indexOf(e,this.position)}if(c==-1||b.found_at<c)c=b.found_at}if(c==-1){c=this.end;return false}a.position=c;return true}
;a.Find=function(b){this.position=this.buf.indexOf(b,this.position);if(this.position<0){this.position=this.end;
return false}return true};a.Mark=function(){this.mark=this.position};a.Extract=function(){if(this.mark>=this.position)
return "";else return this.buf.substr(this.mark,this.position-this.mark)};a.SkipIdentifier=function(){var b=this.buf.
charAt(this.position);if(b>="a"&&b<="z"||b>="A"&&b<="Z"||b=="_"){this.position++;while(true){var b=this.buf.charAt(this.
position);if(b>="a"&&b<="z"||b>="A"&&b<="Z"||b=="_"||b>="0"&&b<="9")this.position++;else return true}}return false};a.
SkipHtmlEntity=function(){if(this.buf.charAt(this.position)!="&")return false;var b=O(this.buf,this.position);if(b<0)
return false;this.position=b;return true};a.SkipEscapableChar=function(){if(this.buf.charAt(this.position)=="\\"&&h.
is_escapable(this.buf.charAt(this.position+1))){this.position+=2;return true}else{if(this.position<this.end)
this.position++;return false}};function o(b){this.name=b;this.attributes={};this.flags=0}a=o.prototype;a.attributes=null
;a.closed=false;a.closing=false;a.attributeCount=function(){if(!this.attributes)return 0;var b=0;for(var c in this.
attributes)b++;return b};a.get_Flags=function(){if(this.flags==0){this.flags=tag_flags[this.name.toLowerCase()];if(this.
flags==undefined)this.flags=2}return this.flags};a.IsSafe=function(){var c=this.name.toLowerCase();if(!allowed_tags[c])
return false;var b=allowed_attributes[c];if(!b)return this.attributeCount()==0;if(!this.attributes)return true;for(var e
 in this.attributes)if(!b[e.toLowerCase()])return false;if(this.attributes["href"])if(!o.IsSafeUrl(this.attributes[
"href"]))return false;if(this.attributes["src"])if(!o.IsSafeUrl(this.attributes["src"]))return false;return true};a.
RenderOpening=function(b){b.Append("<");b.Append(this.name);for(var c in this.m_attributes){b.Append(" ");b.Append(c);b.
Append('="');b.Append(this.m_attributes[c]);b.Append('"')}b.Append(">\n")};a.RenderClosing=function(b){b.Append("</");b.
Append(this.name);b.Append(">\n")};o.IsSafeUrl=function(b){b=b.toLowerCase();return b.substr(0,7)=="http://"||b.substr(0
,8)=="https://"||b.substr(0,6)=="ftp://"};o.Parse=function(b){var e=b.position,c=this.ParseHelper(b);if(c!=null)return c
;b.position=e;return null};o.ParseHelper=function(b){if(b.current()!="<")return null;b.SkipForward(1);if(b.SkipString(
"!--")){b.Mark();if(b.Find("-->")){var e=new o("!");e.attributes["content"]=b.Extract();e.closed=true;b.SkipForward(3);
return e}}var i=b.SkipChar("/");b.Mark();if(!b.SkipIdentifier())return null;var c=new o(b.Extract());c.closing=i;if(i){
if(b.current()!=">")return null;b.SkipForward(1);return c}while(!b.eof()){b.SkipWhitespace();if(b.SkipString("/>")){c.
closed=true;return c}if(b.SkipChar(">"))return c;b.Mark();if(!b.SkipIdentifier())return null;var f=b.Extract();b.
SkipWhitespace();if(!b.SkipChar("="))return null;b.SkipWhitespace();if(b.SkipChar('"')){b.Mark();if(!b.Find('"'))
return null;c.attributes[f]=b.Extract();b.SkipForward(1)}else{b.Mark();while(!b.eof()&&!h.is_whitespace(b.current())&&b.
current()!=">"&&b.current()!="/")b.SkipForward(1);if(!b.eof())c.attributes[f]=b.Extract()}}return null};allowed_tags={b:
1,blockquote:1,code:1,dd:1,dt:1,dl:1,del:1,em:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,i:1,kbd:1,li:1,ol:1,ul:1,p:1,pre:1,s:1,sub
:1,sup:1,strong:1,strike:1,img:1,a:1};allowed_attributes={a:{href:1,title:1},img:{src:1,width:1,height:1,alt:1,title:1}}
;var d=1,l=2,t=4,g=8;tag_flags={p:d|g,div:d,h1:d|g,h2:d|g,h3:d|g,h4:d|g,h5:d|g,h6:d|g,blockquote:d,pre:d,table:d,dl:d,ol
:d,ul:d,form:d,fieldset:d,iframe:d,script:d|l,noscript:d|l,math:d|l,ins:d|l,del:d|l,img:d|l,li:g,dd:g,dt:g,td:g,th:g,
legend:g,address:g,hr:d|t,"!":d|t};delete d;delete l;delete t;function p(c,e,b){this.id=c;this.url=e;if(b==undefined)
this.title=null;else this.title=b}a=p.prototype;a.RenderLink=function(e,b,c){if(this.url.substr(0,7).toLowerCase()==
"mailto:"){b.Append('<a href="');b.HtmlRandomize(this.url);b.Append('"');if(this.title){b.Append(' title="');b.
SmartHtmlEncodeAmpsAndAngles(this.title,0,this.title.length);b.Append('"')}b.Append(">");b.HtmlRandomize(c);b.Append(
"</a>")}else{b.Append('<a href="');b.SmartHtmlEncodeAmpsAndAngles(this.url,0,this.url.length);b.Append('"');if(this.
title){b.Append(' title="');b.SmartHtmlEncodeAmpsAndAngles(this.title,0,this.title.length);b.Append('"')}b.Append(">");b
.Append(c);b.Append("</a>")}};a.RenderImg=function(e,b,c){b.Append('<img src="');b.SmartHtmlEncodeAmpsAndAngles(this.url
,0,this.url.length);b.Append('"');if(c){b.Append(' alt="');b.SmartHtmlEncodeAmpsAndAngles(c,0,c.length);b.Append('"')}
if(this.title){b.Append(' title="');b.SmartHtmlEncodeAmpsAndAngles(this.title,0,this.title.length);b.Append('"')}b.
Append(" />")};p.ParseLinkDefinition=function(b){var e=b.position,c=p.ParseLinkDefinitionInternal(b);if(c==null)b.
position=e;return c};p.ParseLinkDefinitionInternal=function(b){b.SkipWhitespace();if(!b.SkipChar("["))return null;b.Mark
();if(!b.Find("]"))return null;var c=b.Extract();if(c.length==0)return null;if(!b.SkipString("]:"))return null;var e=
this.ParseLinkTarget(b,c);b.SkipLinespace();if(!b.eol())return null;return e};p.ParseLinkTarget=function(b,f){b.
SkipWhitespace();if(b.eol())return null;var c=new p(f);if(b.SkipChar("<")){b.Mark();while(b.current()!=">"){if(b.eof())
return null;b.SkipEscapableChar()}var q=b.Extract();if(!b.SkipChar(">"))return null;c.url=L(N(q));b.SkipWhitespace()}
else{b.Mark();var j=1;while(!b.eol()){var i=b.current();if(h.is_whitespace(i))break;if(f==null)if(i=="(")j++;else if(i==
")"){j--;if(j==0)break}b.SkipEscapableChar()}c.url=L(N(b.Extract()))}b.SkipLinespace();if(b.current()==")")return c;var 
k=b.eol(),m=b.position;if(b.eol()){b.SkipEol();b.SkipLinespace()}var e;switch(b.current()){case "'":case '"':e=b.current
();break;case "(":e=")";break;default:if(k){b.position=m;return c}else return null}b.SkipForward(1);b.Mark();while(true)
{if(b.eol())return null;if(b.current()==e){if(e!=")"){var n=b.position;b.SkipForward(1);b.SkipLinespace();if(f==null&&b.
current()!=")"||f!=null&&!b.eol())continue;b.position=n}break}b.SkipEscapableChar()}c.title=L(b.Extract());b.SkipForward
(1);return c};function J(b,c){this.def=b;this.link_text=c}function P(e,c,b){this.type=e;this.startOffset=c;this.length=b
;this.data=null}function D(b){this.m_Markdown=b;this.m_Scanner=new F();this.m_SpareTokens=new Array();this.DisableLinks=
false}a=D.prototype;a.Format=function(f,e,j,i){this.m_Scanner.reset(e,j,i);var b=this.Tokenize();if(b==null)f.HtmlEncode
(e,j,i);else{this.RenderTokens(f,e,b);for(var c=0;c<b.length;c++)this.FreeToken(b[c])}};a.FormatDirect=function(c){var b
=new E();this.Format(b,c,0,c.length);return b.ToString()};a.MakeID=function(j,n,m){var b=this.m_Scanner;b.reset(j,n,m);
var k=this.Tokenize(),c=new E();if(k==null)c.Append(j.substr(n,m));else for(var i=0;i<k.length;i++){var f=k[i];switch(f.
type){case 0:c.Append(j.substr(f.startOffset,f.length));break;case 9:c.Append(f.data.link_text);break}}b.reset(c.
ToString());while(!b.eof()){if(h.is_alpha(b.current()))break;b.SkipForward(1)}c.Clear();while(!b.eof()){var e=b.current(
);if(h.is_alphadigit(e)||e=="_"||e=="-"||e==".")c.Append(e.toLowerCase());else if(e==" ")c.Append("-");else if(h.
is_lineend(e)){c.Append("-");b.SkipEol();continue}b.SkipForward(1)}return c.ToString()};a.RenderTokens=function(b,f,k){
var m=k.length;for(var i=0;i<m;i++){var c=k[i];switch(c.type){case 0:b.HtmlEncode(f,c.startOffset,c.length);break;case 1
:b.SmartHtmlEncodeAmps(f,c.startOffset,c.length);break;case 2:case 11:case 12:case 13:b.Append(f.substr(c.startOffset,c.
length));break;case 8:b.Append("<br />\n");break;case 3:b.Append("<em>");break;case 4:b.Append("</em>");break;case 5:b.
Append("<strong>");break;case 6:b.Append("</strong>");break;case 7:b.Append("<code>");b.HtmlEncode(f,c.startOffset,c.
length);b.Append("</code>");break;case 9:var e=c.data,j=new D(this.m_Markdown);j.DisableLinks=true;e.def.RenderLink(this
.m_Markdown,b,j.FormatDirect(e.link_text));break;case 10:var e=c.data;e.def.RenderImg(this.m_Markdown,b,e.link_text);
break}}};a.Tokenize=function(){var b=this.m_Scanner,f=null,j=null,q=/[\*\_\`\[\!\<\&\ \\]/g,i=b.position;while(!b.eof())
{if(!b.FindRE(q))break;var k=b.position,c=null;switch(b.current()){case "*":case "_":c=this.CreateEmphasisMark();switch(
c.type){case 13:case 11:case 12:if(j==null)j=new Array();j.push(c);break}break;case "`":c=this.ProcessCodeSpan();break;
case "[":case "!":var n=b.position;c=this.ProcessLinkOrImage();if(c==null)b.position=n;break;case "<":var e=b.position,m
=o.Parse(b);if(m!=null)if(!this.m_Markdown.SafeMode||m.IsSafe())c=this.CreateToken(1,e,b.position-e);else b.position=e;
else{b.position=e;c=this.ProcessAutoLink();if(c==null)b.position=e}break;case "&":var e=b.position;if(b.SkipHtmlEntity()
)c=this.CreateToken(2,e,b.position-e);break;case " ":if(b.CharAtOffset(1)==" "&&h.is_lineend(b.CharAtOffset(2))){b.
SkipForward(2);if(!b.eof()){b.SkipEol();c=this.CreateToken(8,k,0)}}break;case "\\":if(h.is_escapable(b.CharAtOffset(1)))
{c=this.CreateToken(0,b.position+1,1);b.SkipForward(2)}break}if(c!=null){if(f==null)f=new Array();if(k>i)f.push(this.
CreateToken(0,i,k-i));f.push(c);i=b.position}else b.SkipForward(1)}if(f==null)return null;if(b.position>i)f.push(this.
CreateToken(0,i,b.position-i));if(j!=null)this.ResolveEmphasisMarks(f,j);return f};a.CreateEmphasisMark=function(){var b
=this.m_Scanner,e=b.current(),k=e=="*"?"_":"*",c=b.position;if(b.bof()||h.is_whitespace(b.CharAtOffset(-1))){while(h.
is_emphasis(b.current()))b.SkipForward(1);if(b.eof()||h.is_whitespace(b.current()))return this.CreateToken(2,c,b.
position-c);b.position=c}while(h.is_emphasis(b.CharAtOffset(-1)))b.SkipForward(-1);var i=b.bof()||h.is_whitespace(b.
CharAtOffset(-1));b.position=c;while(b.current()==e)b.SkipForward(1);var j=b.position-c;while(h.is_emphasis(b.
CharAtOffset(1)))b.SkipForward(1);var f=b.eof()||h.is_whitespace(b.CharAtOffset(1));b.position=c+j;if(i)return this.
CreateToken(11,c,b.position-c);if(f)return this.CreateToken(12,c,b.position-c);return this.CreateToken(13,c,b.position-c
)};a.SplitMarkToken=function(i,f,b,c){var e=this.CreateToken(b.type,b.startOffset+c,b.length-c);b.length=c;f.splice(f.
indexOf(b)+1,0,e);i.splice(i.indexOf(b)+1,0,e);return e};a.ResolveEmphasisMarks=function(n,b){var m=this.m_Scanner.buf,j
=true;while(j){j=false;for(var i=0;i<b.length;i++){var c=b[i];if(c.type!=11&&c.type!=13)continue;for(var k=i+1;k<b.
length;k++){var f=b[k];if(f.type!=12&&f.type!=13)break;if(m.charAt(c.startOffset)!=m.charAt(f.startOffset))continue;var 
e=Math.min(c.length,f.length);if(e>=3)e=e%2==1?1:2;if(c.length>e){c=this.SplitMarkToken(n,b,c,c.length-e);i--}if(f.
length>e)this.SplitMarkToken(n,b,f,e);c.type=e==1?3:5;f.type=e==1?4:6;b.splice(b.indexOf(c),1);b.splice(b.indexOf(f),1);
j=true;break}}}};a.ProcessAutoLink=function(){if(this.DisableLinks)return null;var c=this.m_Scanner;c.SkipForward(1);c.
Mark();while(!c.eof()){var i=c.current();if(h.is_whitespace(i))break;if(i==">"){var b=L(c.Extract()),e=null;if(H(b)){
var f;if(b.toLowerCase().substr(0,7)=="mailto:")f=b.substr(7);else{f=b;b="mailto:"+b}e=new J(new p("auto",b,null),f)}
else if(K(b))e=new J(new p("auto",b,null),b);if(e!=null){c.SkipForward(1);return this.CreateDataToken(9,e)}return null}c
.SkipEscapableChar()}return null};a.ProcessLinkOrImage=function(){if(this.DisableLinks)return null;var b=this.m_Scanner,
r=b.SkipChar("!")?10:9;if(!b.SkipChar("["))return null;b.Mark();var i=1;while(!b.eof()){var m=b.current();if(m=="[")i++;
else if(m=="]"){i--;if(i==0)break}b.SkipEscapableChar()}if(b.eof())return null;var k=L(b.Extract());b.SkipForward(1);
var s=b.position;if(b.SkipChar("(")){var q=p.ParseLinkTarget(b,null);if(q==null)return null;b.SkipWhitespace();if(!b.
SkipChar(")"))return null;return this.CreateDataToken(r,new J(q,k))}if(!b.SkipChar(" "))b.SkipChar("\t");if(b.eol()){b.
SkipEol();b.SkipLinespace()}var c=null;if(b.current()=="["){b.SkipForward(1);b.Mark();if(!b.Find("]"))return null;c=b.
Extract();b.SkipForward(1)}else b.position=s;if(!c){c=k;while(true){var j=c.indexOf("\n");if(j<0)break;var f=j;while(f>0
&&h.is_whitespace(c.charAt(f-1)))f--;var e=j;while(e<c.length&&h.is_whitespace(c.charAt(e)))e++;c=c.substr(0,f)+" "+c.
substr(e)}}var n=this.m_Markdown.GetLinkDefinition(c);if(n==null)return null;return this.CreateDataToken(r,new J(n,k))};
a.ProcessCodeSpan=function(){var b=this.m_Scanner,c=b.position,e=0;while(b.SkipChar("`"))e++;b.SkipWhitespace();if(b.eof
())return this.CreateToken(0,c,b.position-c);var f=b.position;if(!b.Find(b.buf.substr(c,e)))return this.CreateToken(0,c,
b.position-c);var i=b.position+e;while(h.is_whitespace(b.CharAtOffset(-1)))b.SkipForward(-1);var j=this.CreateToken(7,f,
b.position-f);b.position=i;return j};a.CreateToken=function(f,e,c){if(this.m_SpareTokens.length!=0){var b=this.
m_SpareTokens.pop();b.type=f;b.startOffset=e;b.length=c;b.data=null;return b}else return new P(f,e,c)};a.CreateDataToken
=function(e,c){if(this.m_SpareTokens.length!=0){var b=this.m_SpareTokens.pop();b.type=e;b.data=c;return b}else{var b=
new P(e,0,0);b.data=c;return b}};a.FreeToken=function(b){b.data=null;this.m_SpareTokens.push(b)};function C(){}a=C.
prototype;a.buf=null;a.blockType=0;a.contentStart=0;a.contentLen=0;a.lineStart=0;a.lineLen=0;a.children=null;a.data=null
;a.get_Content=function(){if(this.buf==null)return null;if(this.contentStart==-1)return this.buf;return this.buf.substr(
this.contentStart,this.contentLen)};a.get_CodeContent=function(){var c=new E();for(var b=0;b<this.children.length;b++){c
.Append(this.children[b].get_Content());c.Append("\n")}return c.ToString()};a.RenderChildren=function(e,c){for(var b=0;b
<this.children.length;b++)this.children[b].Render(e,c)};a.ResolveHeaderID=function(e){if(this.data!=null)return this.
data;var c=M(this.buf,this.contentStart,this.get_contentEnd()),b=null;if(c!=null){this.set_contentEnd(c.end);b=c.id}else
 b=e.MakeUniqueHeaderID(this.buf,this.contentStart,this.contentLen);this.data=b;return b};a.Render=function(c,b){switch(
this.blockType){case 0:return;case 12:b.Append("<p>");c.processSpan(b,this.buf,this.contentStart,this.contentLen);b.
Append("</p>\n");break;case 17:c.processSpan(b,this.buf,this.contentStart,this.contentLen);b.Append("\n");break;case 1:
case 2:case 3:case 4:case 5:case 6:if(c.ExtraMode&&!c.SafeMode){b.Append("<h"+(this.blockType-1+1).toString());var i=
this.ResolveHeaderID(c);if(i){b.Append(' id="');b.Append(i);b.Append('">')}else b.Append(">")}else b.Append("<h"+(this.
blockType-1+1).toString()+">");c.processSpan(b,this.buf,this.contentStart,this.contentLen);b.Append("</h"+(this.
blockType-1+1).toString()+">\n");break;case 14:b.Append("<hr />\n");return;case 10:case 11:b.Append("<li>");c.
processSpan(b,this.buf,this.contentStart,this.contentLen);b.Append("</li>\n");break;case 15:b.Append(this.buf.substr(
this.contentStart,this.contentLen));return;case 16:b.HtmlEncode(this.buf,this.contentStart,this.contentLen);return;case 
18:b.Append("<pre><code>");for(var e=0;e<this.children.length;e++){var f=this.children[e];b.
HtmlEncodeAndConvertTabsToSpaces(f.buf,f.contentStart,f.contentLen);b.Append("\n")}b.Append("</code></pre>\n\n");return;
case 9:b.Append("<blockquote>\n");this.RenderChildren(c,b);b.Append("</blockquote>\n");return;case 19:b.Append("<li>\n")
;this.RenderChildren(c,b);b.Append("</li>\n");return;case 20:b.Append("<ol>\n");this.RenderChildren(c,b);b.Append(
"</ol>\n");return;case 21:b.Append("<ul>\n");this.RenderChildren(c,b);b.Append("</ul>\n");return;case 22:this.data.
RenderOpening(b);this.RenderChildren(c,b);this.data.RenderClosing(b);return;case 23:this.RenderChildren(c,b);return}};a.
RevertToPlain=function(){this.blockType=12;this.contentStart=this.lineStart;this.contentLen=this.lineLen};a.
get_contentEnd=function(){return this.contentStart+this.contentLen};a.set_contentEnd=function(b){this.contentLen=b-this.
contentStart};a.get_leadingSpaces=function(){var c=0;for(var b=this.lineStart;b<this.lineStart+this.lineLen;b++)if(this.
buf.charAt(b)==" ")c++;else break;return c};a.CopyFrom=function(b){this.blockType=b.blockType;this.buf=b.buf;this.
contentStart=b.contentStart;this.contentLen=b.contentLen;this.lineStart=b.lineStart;this.lineLen=b.lineLen;return this};
function x(b,c){this.m_Markdown=b;this.m_parentType=0;this.m_bMarkdownInHtml=c}a=x.prototype;a.Process=function(c){var b
=new F(c);return this.ScanLines(b)};a.ProcessRange=function(f,e,b){var c=new F(f,e,b);return this.ScanLines(c)};a.
ScanLines=function(j){var e=new Array(),b=new Array();while(!j.eof()){var c=this.EvaluateLine(j);if(c.blockType==7||c.
blockType==8){if(b.length>0){var f=b.pop();this.CollapseLines(e,b);if(f.blockType!=0){f.RevertToPlain();f.blockType=c.
blockType==7?1:2;e.push(f);continue}}if(c.blockType==7){c.RevertToPlain();b.push(c)}else if(c.contentLen>=3){c.blockType
=14;e.push(c)}else{c.RevertToPlain();b.push(c)}continue}var i=b.length>0?b[0].blockType:0;switch(c.blockType){case 0:
switch(i){case 0:this.FreeBlock(c);break;case 12:this.CollapseLines(e,b);this.FreeBlock(c);break;case 9:case 10:case 11:
case 13:b.push(c);break}break;case 12:switch(i){case 0:case 12:b.push(c);break;case 9:case 10:case 11:var f=b[b.length-1
];if(f.blockType==0){this.CollapseLines(e,b);b.push(c)}else b.push(c);break;case 13:this.CollapseLines(e,b);b.push(c);
break}break;case 13:switch(i){case 0:b.push(c);break;case 12:case 9:var f=b[b.length-1];if(f.blockType==0){this.
CollapseLines(e,b);b.push(c)}else{c.RevertToPlain();b.push(c)}break;case 10:case 11:case 13:b.push(c);break}break;case 9
:if(i!=9)this.CollapseLines(e,b);b.push(c);break;case 10:case 11:switch(i){case 0:b.push(c);break;case 12:case 9:var f=b
[b.length-1];if(f.blockType==0||this.m_parentType==10||this.m_parentType==11){this.CollapseLines(e,b);b.push(c)}else{c.
RevertToPlain();b.push(c)}break;case 10:case 11:if(c.blockType!=i)this.CollapseLines(e,b);b.push(c);break;case 13:this.
CollapseLines(e,b);b.push(c);break}break;default:this.CollapseLines(e,b);e.push(c);break}}this.CollapseLines(e,b);
return e};a.CreateBlock=function(){if(this.m_Markdown.m_SpareBlocks.length>1)return this.m_Markdown.m_SpareBlocks.pop();
else return new C()};a.FreeBlock=function(b){this.m_Markdown.m_SpareBlocks.push(b)};a.FreeBlocks=function(b){for(var c=0
;c<b.length;c++)this.m_Markdown.m_SpareBlocks.push(b[c]);b.length=0};a.RenderLines=function(f){var b=this.m_Markdown.
GetStringBuilder();for(var c=0;c<f.length;c++){var e=f[c];b.Append(e.buf.substr(e.contentStart,e.contentLen));b.Append(
"\n")}return b.ToString()};a.CollapseLines=function(e,b){while(b.length>0&&b[b.length-1].blockType==0)this.FreeBlock(b.
pop());if(b.length==0)return;switch(b[0].blockType){case 12:var c=this.CreateBlock();c.blockType=12;c.buf=b[0].buf;c.
contentStart=b[0].contentStart;c.set_contentEnd(b[b.length-1].get_contentEnd());e.push(c);this.FreeBlocks(b);break;case 
9:var m=this.RenderLines(b),k=new x(this.m_Markdown,this.m_bMarkdownInHtml);k.m_parentType=9;var j=this.CreateBlock();j.
blockType=9;j.children=k.Process(m);this.FreeBlocks(b);e.push(j);break;case 10:case 11:e.push(this.BuildList(b));break;
case 13:var f=this.CreateBlock();f.blockType=18;f.children=new Array();for(var i=0;i<b.length;i++)f.children.push(b[i]);
e.push(f);b.length=0;break}};a.EvaluateLine=function(c){var b=this.CreateBlock();b.lineStart=c.position;b.buf=c.buf;b.
contentStart=c.position;b.contentLen=-1;b.blockType=this.EvaluateLineInternal(c,b);if(b.contentLen<0){c.SkipToEol();b.
contentLen=c.position-b.contentStart}b.lineLen=c.position-b.lineStart;c.SkipEol();return b};a.EvaluateLineInternal=
function(b,c){if(b.eol())return 0;var j=b.position,e=b.current();if(e=="#"){var i=1;b.SkipForward(1);while(b.current()==
"#"){i++;b.SkipForward(1)}if(i>6)i=6;b.SkipWhitespace();c.contentStart=b.position;b.SkipToEol();if(this.m_Markdown.
ExtraMode&&!this.m_Markdown.SafeMode){var m=M(b.buf,c.contentStart,b.position);if(m!=null){c.data=m.id;b.position=m.end}
}while(b.position>c.contentStart&&b.CharAtOffset(-1)=="#")b.SkipForward(-1);while(b.position>c.contentStart&&h.
is_whitespace(b.CharAtOffset(-1)))b.SkipForward(-1);c.contentLen=b.position-c.contentStart;b.SkipToEol();return 1+i-1}
if(e=="-"||e=="="){var k=e;while(b.current()==k)b.SkipForward(1);b.SkipLinespace();if(b.eol())return k=="="?7:8;b.
position=j}if(e=="~"&&this.m_Markdown.ExtraMode){if(this.ProcessFencedCodeBlock(b,c))return c.blockType;b.position=j}
var f=-1,r=0;while(!b.eol()){if(b.current()==" "){if(f<0)r++}else if(b.current()=="\t"){if(f<0)f=b.position}else break;b
.SkipForward(1)}if(b.eol()){c.contentLen=0;return 0}if(r>=4){c.contentStart=j+4;return 13}if(f>=0&&f-j<4){c.contentStart
=f+1;return 13}c.contentStart=b.position;e=b.current();if(e=="<"){if(this.ScanHtml(b,c))return c.blockType;b.position=c.
contentStart}if(e==">"){if(h.is_linespace(b.CharAtOffset(1))){b.SkipForward(2);c.contentStart=b.position;return 9}b.
SkipForward(1);c.contentStart=b.position;return 9}if(e=="-"||e=="_"||e=="*"){var n=0;while(!b.eol()){var k=b.current();
if(b.current()==e){n++;b.SkipForward(1);continue}if(h.is_linespace(b.current())){b.SkipForward(1);continue}break}if(b.
eol()&&n>=3)return 14;b.position=c.contentStart}if((e=="*"||e=="+"||e=="-")&&h.is_linespace(b.CharAtOffset(1))){b.
SkipForward(1);b.SkipLinespace();c.contentStart=b.position;return 11}if(h.is_digit(e)){b.SkipForward(1);while(h.is_digit
(b.current()))b.SkipForward(1);if(b.SkipChar(".")&&b.SkipLinespace()){c.contentStart=b.position;return 10}b.position=c.
contentStart}if(e=="["){var q=p.ParseLinkDefinition(b);if(q!=null){this.m_Markdown.AddLinkDefinition(q);return 0}}
return 12};a.GetMarkdownMode=function(c){var b=c.attributes["markdown"];if(b==undefined)if(this.m_bMarkdownInHtml)
return 3;else return 0;delete c.attributes["markdown"];if(b=="1")return (c.get_Flags()&8)!=0?2:1;if(b=="block")return 1;
if(b=="deep")return 3;if(b=="span")return 2;return 4};a.ProcessMarkdownEnabledHtml=function(b,e,q,m){var f=b.position,k=
1,j=false;while(!b.eof()){if(!b.Find("<"))break;var n=b.position,i=o.Parse(b);if(i==null){b.SkipForward(1);continue}if(
this.m_Markdown.SafeMode&&m==4&&!j)if(!i.IsSafe())j=true;if(i.closed)continue;if(i.name==q.name)if(i.closing){k--;if(k==
0){b.SkipLinespace();b.SkipEol();e.blockType=22;e.data=q;e.contentEnd=b.position;switch(m){case 2:var c=this.CreateBlock
();c.buf=b.buf;c.blockType=17;c.contentStart=f;c.contentLen=n-f;e.children=new Array();e.children.push(c);break;case 1:
case 3:var r=new x(this.m_Markdown,m==3);e.children=r.ProcessRange(b.buf,f,n-f);break;case 4:if(j){e.blockType=16;e.
contentEnd=b.position}else{var c=this.CreateBlock();c.buf=b.buf;c.blockType=15;c.contentStart=f;c.contentLen=n-f;e.
children=new Array();e.children.push(c)}break}return true}}else k++}return false};a.ScanHtml=function(b,c){var k=b.
position,i=o.Parse(b);if(i==null)return false;if(i.closing)return false;var m=false;if(this.m_Markdown.SafeMode&&!i.
IsSafe())m=true;var r=i.get_Flags();if((r&1)==0)return false;if((r&4)!=0||i.closed){b.SkipLinespace();b.SkipEol();c.
contentLen=b.position-c.contentStart;c.blockType=m?16:15;return true}if((r&2)!=0){b.SkipLinespace();if(!b.eol())
return false}if(this.m_Markdown.ExtraMode){var n=this.GetMarkdownMode(i);if(n!=0)return this.ProcessMarkdownEnabledHtml(
b,c,i,n)}var j=null,q=1;while(!b.eof()){if(!b.Find("<"))break;var u=b.position,f=o.Parse(b);if(f==null){b.SkipForward(1)
;continue}if(this.m_Markdown.SafeMode&&!f.IsSafe())m=true;if(f.closed)continue;if(!f.closing&&this.m_Markdown.ExtraMode
&&!m){var n=this.GetMarkdownMode(f);if(n!=0){var s=this.CreateBlock();if(this.ProcessMarkdownEnabledHtml(b,s,f,n)){if(j
==null)j=new Array();if(u>k){var e=this.CreateBlock();e.buf=b.buf;e.blockType=15;e.contentStart=k;e.contentLen=u-k;j.
push(e)}j.push(s);k=b.position;continue}else this.FreeBlock(s)}}if(f.name==i.name&&!f.closed)if(f.closing){q--;if(q==0){
b.SkipLinespace();b.SkipEol();if(m){c.blockType=16;c.contentEnd=b.position;return true}if(j!=null){if(b.position>k){var 
e=this.CreateBlock();e.buf=b.buf;e.blockType=15;e.contentStart=k;e.contentLen=b.position-k;j.push(e)}c.blockType=23;c.
contentEnd=b.position;c.children=j;return true}c.blockType=15;c.contentLen=b.position-c.contentStart;return true}}else 
q++}return 0};a.BuildList=function(c){var m=c[0].blockType,y=c[0].get_leadingSpaces();for(var b=1;b<c.length;b++){if(c[b
].blockType==12&&(c[b-1].blockType==12||c[b-1].blockType==m)){c[b-1].set_contentEnd(c[b].get_contentEnd());this.
FreeBlock(c[b]);c.splice(b,1);b--;continue}if(c[b].blockType!=13&&c[b].blockType!=0){var v=c[b].get_leadingSpaces();if(v
>y){c[b].blockType=13;var z=c[b].get_contentEnd();c[b].contentStart=c[b].lineStart+v;c[b].set_contentEnd(z)}}}var i=this
.CreateBlock();i.blockType=m==11?21:20;i.children=new Array();for(var b=0;b<c.length;b++){var j=b;while(j>0&&c[j-1].
blockType==0)j--;var e=b;while(e<c.length-1&&c[e+1].blockType!=m)e++;if(j==e)i.children.push(this.CreateBlock().CopyFrom
(c[b]));else{var r=false,q=this.m_Markdown.GetStringBuilder();for(var k=j;k<=e;k++){var n=c[k];q.Append(n.buf.substr(n.
contentStart,n.contentLen));q.Append("\n");if(c[k].blockType==0)r=true}var f=this.CreateBlock();f.blockType=19;var s=
new x(this.m_Markdown);s.m_parentType=m;f.children=s.Process(q.ToString());if(!r)for(var b=0;b<f.children.length;b++){
var u=f.children[b];if(u.blockType==12)u.blockType=17}i.children.push(f)}b=e}this.FreeBlocks(c);c.length=0;return i};a.
ProcessFencedCodeBlock=function(b,e){b.Mark();while(b.current()=="~")b.SkipForward(1);var f=b.Extract();if(f.length<3)
return false;b.SkipLinespace();if(!b.eol())return false;b.SkipEol();var j=b.position;if(!b.Find(f))return false;if(!h.
is_lineend(b.CharAtOffset(-1)))return false;var i=b.position;b.SkipForward(f.length);b.SkipLinespace();if(!b.eol())
return false;e.blockType=18;e.children=new Array();i--;var c=this.CreateBlock();c.blockType=13;c.buf=b.buf;c.
contentStart=j;c.contentLen=i-j;e.children.push(c);return true};this.Markdown=w}()