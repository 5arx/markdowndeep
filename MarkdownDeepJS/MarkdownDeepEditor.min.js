// Minified by MiniME from toptensoftware.com
var MarkdownDeepEditor=new(function(){var o=false,w={Z:"undo",Y:"redo",B:"bold",I:"italic",H:"heading",K:"code",U:
"ullist",O:"ollist",Q:"indent",E:"outdent",L:"link",G:"img",R:"hr","0":"h0","1":"h1","2":"h2","3":"h3","4":"h4","5":"h5"
,"6":"h6"};function x(d,c){return d.substr(0,c.length)==c}function r(d,c){return d.substr(-c.length)==c}function q(c){
return c==" "||c=="\t"||c=="\r"||c=="\n"}function s(c){return c=="\r"||c=="\n"}function u(e){var c=0,d=e.length;while(c<
d&&q(e.charAt(c)))c++;while(d-1>c&&q(e.charAt(d-1)))d--;return e.substr(c,d-c)}function p(c,d,e){if(c.addEventListener)c
.addEventListener(d,e,false);else if(c.attachEvent)c.attachEvent("on"+d,e)}function v(c){if(c.preventDefault){c.
preventDefault();return false}if(c.cancelBubble!==undefined){c.cancelBubble=true;return false}return false}function t(d,
c){return c-d.value.slice(0,c).split("\r\n").length+1}function n(){}a=n.prototype;a.r=function(c){this.K=c;if(o){var d=
document.selection.createRange(),e=d.duplicate();e.moveToElementText(c);e.setEndPoint("EndToEnd",d);this.L=e.text.length
;this.N=this.L-d.text.length}else{this.N=c.selectionStart;this.L=c.selectionEnd}this.P=c.value};a.l=function(){var c=new
 n();c.K=this.K;c.L=this.L;c.N=this.N;c.P=this.P;return c};a.g=function(){this.K.value=this.P;this.K.focus();if(o){var c
=this.K.createTextRange();c.collapse(true);c.moveEnd("character",t(this.K,this.L));c.moveStart("character",t(this.K,this
.N));c.select()}else this.K.setSelectionRange(this.N,this.L)};a.x=function(c){this.P=this.P.substr(0,this.N)+c+this.P.
substr(this.L);this.L=this.N+c.length};a.o=function(){return this.P.substr(this.N,this.L-this.N)};a.q=function(d,c){this
.L+=c;this.N-=d};a.w=function(c){return this.N>=c.length&&this.P.substr(this.N-c.length,c.length)==c};a.p=function(c){
return this.P.substr(this.L,c.length)==c};a.F=function(){while(q(this.P.charAt(this.N)))this.N++;while(this.L>this.N&&q(
this.P.charAt(this.L-1)))this.L--};a.t=function(c){return c==0||s(this.P.charAt(c-1))};a.n=function(c){while(c>0&&!s(
this.P.charAt(c-1)))c--;return c};a.k=function(c){while(c<this.P.length&&!s(this.P.charAt(c)))c++;return c};a.m=function
(c){return this.D(this.k(c))};a.D=function(c){if(this.P.substr(c,2)=="\r\n")return c+2;if(s(this.P.charAt(c)))return c+1
;return c};a.E=function(c){if(c>2&&this.P.substr(c-2,2)=="\r\n")return c-2;if(c>1&&s(this.P.charAt(c-1)))return c-1;
return c};a.A=function(){this.N=this.n(this.N);if(!this.t(this.L))this.L=this.D(this.k(this.L))};a.z=function(){var c=
this.N;while(this.N>0&&q(this.P.charAt(this.N-1)))this.N--;while(q(this.P.charAt(this.L)))this.L++};a.j=function(){var d
=this.o(),c=d.match(/\n[ \t\r]*\n/);if(c){alert("Please make a selection that doesn't include a paragraph break");
return false}return true};a.s=function(f){var e=this.P.length;for(var c=f;c<e;c++){var d=this.P[c];if(s(d))return true;
if(!q(this.P.charAt(c)))return false}return true};a.y=function(){this.N=this.n(this.N);find_start_of_para:while(this.N>0
){var c=this.n(this.E(this.N));if(c==0)break;if(this.s(c))break;this.N=c}this.L=this.N;while(this.L<this.P.length){if(
this.s(this.L))break;this.L=this.m(this.L)}};function k(c,e,f){if(!c.setSelectionRange)o=true;this.I=null;this.Q=[];this
.O=0;this.M=3;this.J=new MarkdownDeep.Markdown();this.J.SafeMode=false;this.J.ExtraMode=true;this.K=c;this.G=e;this.H=f;
var g=this;p(c,"keyup",function(){g.v()});p(c,"keydown",function(d){return g.u(d)});p(c,"paste",function(){g.v()});p(c,
"input",function(){g.v()});p(c,"mousedown",function(){g.C(3)});this.v()}var a=k.prototype,b=k.prototype;a.u=function(c){
if(c.ctrlKey||c.metaKey){var e=String.fromCharCode(c.charCode||c.keyCode);if(w[e]!=undefined){this.InvokeCommand(w[e]);
return v(c)}return true}var d;switch(c.keyCode){case 9:this.InvokeCommand(c.shiftKey?"untab":"tab");return v(c);case 37:
case 39:case 38:case 40:case 36:case 35:case 33:case 34:d=3;break;case 8:case 46:d=2;break;case 13:d=4;break;default:d=1
}this.C(d)};a.C=function(c){if(this.M==c)return;this.M=c;this.i()};a.i=function(){var c=new n();c.r(this.K);this.Q.
splice(this.O,this.Q.length-this.O,c);this.O=this.Q.length};a.v=function(f){var c=this.K.value;if(c===this.I&&this.I!==
null)return;var d=new Date().getTime(),e=this.J.Transform(c);this.timeTransform=new Date().getTime()-d;d=new Date().
getTime();if(this.G)this.G.innerHTML=e;if(this.H){this.H.innerHTML="";this.H.appendChild(document.createTextNode(e))}
this.timeUpdateDOM=new Date().getTime()-d;this.I=c};b.onOptionsChanged=function(){this.I=null;this.v()};b.cmd_undo=
function(){if(this.O>0){if(this.O==this.Q.length){this.i();this.O--}this.O--;this.Q[this.O].g();this.M=0;this.v()}};b.
cmd_redo=function(){if(this.O+1<this.Q.length){this.O++;this.Q[this.O].g();this.M=0;this.v();if(this.O==this.Q.length-1)
this.Q.pop()}};a.B=function(d,f){d.y();d.z();var c=d.o();c=u(c);var h=0,e=c.match(/^(\#+)(.*?)(\#+)?$/);if(e){c=u(e[2]);
h=e[1].length}else{e=c.match(/^(.*?)(?:\r\n|\n|\r)\s*(\-*|\=*)$/);if(e){c=u(e[1]);h=e[2].charAt(0)=="="?1:0}else{c=c.
replace(/(\r\n|\n|\r)/gm,"");h=0}}if(f==-1)f=(h+1)%4;var g=0,j=0;if(f==0){if(c=="Heading"){d.x("");return true}j=c.
length;g=0}else{if(c=="")c="Heading";g=f+1;j=c.length;var i="";for(var l=0;l<f;l++)i+="#";c=i+" "+c+" "+i}c+="\n\n";if(d
.N!=0)if(o){c="\r\n\r\n"+c;g+=4}else{c="\n\n"+c;g+=2}d.x(c);d.N+=g;d.L=d.N+j;return true};b.cmd_heading=function(c){
return this.B(c,-1)};b.cmd_h0=function(c){return this.B(c,0)};b.cmd_h1=function(c){return this.B(c,1)};b.cmd_h2=function
(c){return this.B(c,2)};b.cmd_h3=function(c){return this.B(c,3)};b.cmd_h4=function(c){return this.B(c,4)};b.cmd_h5=
function(c){return this.B(c,5)};b.cmd_h6=function(c){return this.B(c,6)};b.IndentCodeBlock=function(g,f){g.A();var d=g.o
().split("\n");if(f===null){var c;for(c=0;c<d.length;c++){if(u(d[c])=="")continue;if(!x(d[c],"\t")&&!x(d[c],"    "))
break}f=c!=d.length}for(var c=0;c<d.length;c++){if(u(d[c])=="")continue;var e=d[c];if(f)e="    "+d[c];else if(x(d[c],
"\t"))e=d[c].substr(1);else if(x(d[c],"    "))e=d[c].substr(4);d.splice(c,1,e)}g.x(d.join("\n"))};b.cmd_code=function(c)
{if(c.o().indexOf("\n")<0){c.F();if(c.w("`"))c.N--;if(c.p("`"))c.L++;return this.h(c,"`")}this.IndentCodeBlock(c,null);
return true};b.cmd_tab=function(c){if(c.o().indexOf("\n")>0)this.IndentCodeBlock(c,true);else{c.x("\t");c.N=c.L}
return true};b.cmd_untab=function(c){if(c.o().indexOf("\n")>0){this.IndentCodeBlock(c,false);return true}return false};a
.h=function(d,e){var g=d.P,f=e.length,c=d.o();if(x(c,e)&&r(c,e))d.x(c.substr(f,c.length-f*2));else{d.F();c=d.o();if(!c)c
="text";else c=c.replace(/(\r\n|\n|\r)/gm,"");d.x(e+c+e);d.q(-f,-f)}return true};b.cmd_bold=function(c){if(!c.j())
return false;c.F();if(c.w("**"))c.N-=2;if(c.p("**"))c.L+=2;return this.h(c,"**")};b.cmd_italic=function(c){if(!c.j())
return false;c.F();if(c.w("*")&&!c.w("**")||c.w("***"))c.N-=1;if(c.p("*")&&!c.w("**")||c.p("***"))c.L+=1;return this.h(c
,"*")};b.indent_or_outdent=function(c,g){if(false&&c.N==c.L){c.z();c.x("\n\n> Quote\n\n");c.N+=4;c.L=c.N+5;return true}c
.A();var e=c.o().split("\n");for(var d=0;d<e.length-1;d++){var f=e[d];if(g){if(x(e[d],"> "))f=e[d].substr(2)}else f="> "
+e[d];e.splice(d,1,f)}c.x(e.join("\n"));return true};b.cmd_indent=function(c){return this.indent_or_outdent(c,false)};b.
cmd_outdent=function(c){return this.indent_or_outdent(c,true)};b.cmd_ollist=function(c){var e=new MarkdownDeep.Markdown(
),d=e.GetListItems(c.P,c.N);alert(d)};b.cmd_link=function(c){c.F();if(!c.j())return false;var e=prompt(
"Enter the target URL:");if(e===null)return false;var d=c.o();if(d.length==0)d="link text";var f="["+d+"]("+e+")";c.x(f)
;c.N++;c.L=c.N+d.length;return true};b.cmd_img=function(c){c.F();if(!c.j())return false;var e=prompt(
"Enter the image URL");if(e===null)return false;var d=c.o();if(d.length==0)d="Image Text";var f="!["+d+"]("+e+")";c.x(f)
;c.N+=2;c.L=c.N+d.length;return true};b.cmd_hr=function(c){c.z();if(c.N==0)c.x("----------\n\n");else c.x(
"\n\n----------\n\n");c.N=c.L;return true};b.InvokeCommand=function(c){if(c=="undo"||c=="redo"){this["cmd_"+c]();this.K.
focus();return}var d=new n();d.r(this.K);var e=d.l();if(this["cmd_"+c](d)){this.M=0;this.Q.splice(this.O,this.Q.length-
this.O,e);this.O++;d.g();this.v();return true}else{this.K.focus();return false}};delete a;delete b;this.Editor=k})()